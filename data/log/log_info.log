25-07-20.00:47:10.753 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 27936 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.00:47:10.756 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.00:47:12.111 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.00:47:12.115 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.00:47:12.182 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 0 Redis repository interfaces.
25-07-20.00:47:13.391 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.00:47:13.402 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.00:47:13.402 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.00:47:13.402 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.00:47:13.573 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.00:47:13.573 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2742 ms
25-07-20.00:47:13.979 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.00:47:14.697 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.00:47:14.727 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.00:47:16.522 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.00:47:16.648 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.00:47:16.671 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.00:47:16.673 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.00:47:16.790 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3ae91ab3:0/SimpleConnection@9c40f43 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 54759]
25-07-20.00:47:16.889 [main            ] INFO  Application            - Started Application in 6.795 seconds (JVM running for 7.916)
25-07-20.00:47:17.408 [RMI TCP Connection(3)-192.168.153.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.00:47:17.409 [RMI TCP Connection(3)-192.168.153.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.00:47:17.411 [RMI TCP Connection(3)-192.168.153.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-07-20.00:47:17.414 [RMI TCP Connection(4)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.00:47:18.085 [RMI TCP Connection(4)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.00:47:18.118 [RMI TCP Connection(4)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.00:47:18.174 [RMI TCP Connection(4)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.00:49:01.194 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.00:49:01.196 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.00:49:01.728 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.00:49:01.728 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.00:49:01.786 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.00:49:01.786 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.00:49:08.667 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 33952 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.00:49:08.671 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.00:49:09.777 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.00:49:09.780 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.00:49:09.836 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 0 Redis repository interfaces.
25-07-20.00:49:10.800 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.00:49:10.812 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.00:49:10.813 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.00:49:10.813 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.00:49:10.991 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.00:49:10.991 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2257 ms
25-07-20.00:49:11.362 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.00:49:11.992 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.00:49:12.022 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.00:49:13.520 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.00:49:13.617 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.00:49:13.639 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.00:49:13.641 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.00:49:13.699 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#57867d96:0/SimpleConnection@1e5190bd [delegate=amqp://admin@127.0.0.1:5672/, localPort= 55072]
25-07-20.00:49:13.778 [main            ] INFO  Application            - Started Application in 5.723 seconds (JVM running for 6.559)
25-07-20.00:49:14.329 [RMI TCP Connection(2)-192.168.153.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.00:49:14.329 [RMI TCP Connection(2)-192.168.153.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.00:49:14.330 [RMI TCP Connection(2)-192.168.153.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-07-20.00:49:14.333 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.00:49:14.582 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.00:49:14.604 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.00:49:14.636 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.00:49:44.830 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:0
25-07-20.00:49:44.830 [http-nio-8091-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:0
25-07-20.00:49:44.830 [http-nio-8091-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:0
25-07-20.00:49:44.830 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:0
25-07-20.00:49:44.890 [http-nio-8091-exec-14] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.00:49:44.931 [http-nio-8091-exec-14] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.00:49:45.637 [http-nio-8091-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:0 response: {"code":"0000","data":[],"info":"调用成功"}
25-07-20.00:49:45.637 [http-nio-8091-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:0 response: {"code":"0000","data":[],"info":"调用成功"}
25-07-20.00:49:45.637 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:0 response: {"code":"0000","data":[],"info":"调用成功"}
25-07-20.00:49:45.637 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:0 response: {"code":"0000","data":[],"info":"调用成功"}
25-07-20.00:49:57.934 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:49:57.936 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:49:57.945 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:49:57.950 [http-nio-8091-exec-16] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:49:58.103 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:49:58.103 [http-nio-8091-exec-16] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:49:58.103 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:49:58.103 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:49:59.098 [http-nio-8091-exec-18] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-07-20.00:49:59.166 [http-nio-8091-exec-18] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-07-20.00:50:02.701 [http-nio-8091-exec-20] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.00:50:02.733 [http-nio-8091-exec-20] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.00:50:09.239 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:50:09.266 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:52:20.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.00:52:20.946 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.00:52:21.136 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.00:52:21.197 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.00:52:21.260 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.00:52:21.261 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.00:52:26.729 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 37756 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.00:52:26.731 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.00:52:27.982 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.00:52:27.984 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.00:52:28.043 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 0 Redis repository interfaces.
25-07-20.00:52:29.115 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.00:52:29.128 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.00:52:29.128 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.00:52:29.128 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.00:52:29.289 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.00:52:29.289 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2500 ms
25-07-20.00:52:29.685 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.00:52:30.352 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.00:52:30.380 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.00:52:32.025 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.00:52:32.136 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.00:52:32.153 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.00:52:32.155 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.00:52:32.214 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#28a3fc34:0/SimpleConnection@25511895 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 56008]
25-07-20.00:52:32.310 [main            ] INFO  Application            - Started Application in 6.208 seconds (JVM running for 7.263)
25-07-20.00:52:32.898 [RMI TCP Connection(2)-192.168.153.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.00:52:32.899 [RMI TCP Connection(2)-192.168.153.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.00:52:32.901 [RMI TCP Connection(2)-192.168.153.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-07-20.00:52:32.902 [RMI TCP Connection(1)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.00:52:33.198 [RMI TCP Connection(1)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.00:52:33.222 [RMI TCP Connection(1)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.00:52:33.264 [RMI TCP Connection(1)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.00:55:23.849 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:55:23.850 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:55:23.850 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:55:23.850 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:55:23.899 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.00:55:23.951 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.00:55:24.479 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:55:24.479 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:55:24.479 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:55:24.479 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:55:48.095 [http-nio-8091-exec-13] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.00:55:48.122 [http-nio-8091-exec-13] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.00:55:49.338 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:55:49.363 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"7等奖","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"6等奖","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"5等奖","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardTitle":"4等奖","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"3等奖","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"2等奖","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"1等奖","awardUnlock":false,"sort":8,"waitUnlockCount":2}],"info":"调用成功"}
25-07-20.00:55:52.486 [http-nio-8091-exec-12] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.00:55:52.497 [http-nio-8091-exec-12] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.00:57:07.107 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:57:07.111 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:57:07.123 [http-nio-8091-exec-22] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:57:07.126 [http-nio-8091-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:57:07.162 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.00:57:07.162 [http-nio-8091-exec-22] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.00:57:07.162 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.00:57:07.167 [http-nio-8091-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.00:57:08.173 [http-nio-8091-exec-24] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-07-20.00:57:08.279 [http-nio-8091-exec-24] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-07-20.00:57:17.980 [http-nio-8091-exec-19] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-07-20.00:57:18.026 [http-nio-8091-exec-19] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-07-20.00:57:24.046 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.00:57:24.061 [http-nio-8091-exec-9] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.00:57:28.675 [http-nio-8091-exec-25] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.00:57:28.688 [http-nio-8091-exec-25] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.00:57:41.346 [http-nio-8091-exec-34] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.00:57:41.369 [http-nio-8091-exec-34] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.10:52:14.988 [http-nio-8091-exec-30] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.10:52:15.018 [http-nio-8091-exec-30] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.10:52:16.396 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.10:52:16.399 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.10:52:16.945 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.10:52:17.238 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.10:52:17.319 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.10:52:17.319 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.10:52:23.895 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 37064 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.10:52:23.897 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.10:52:25.414 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.10:52:25.418 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.10:52:25.474 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 0 Redis repository interfaces.
25-07-20.10:52:26.656 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.10:52:26.667 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.10:52:26.668 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.10:52:26.669 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.10:52:26.854 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.10:52:26.854 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2897 ms
25-07-20.10:52:27.287 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.10:52:28.019 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.10:52:28.053 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.10:52:29.851 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.10:52:29.965 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.10:52:29.983 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.10:52:29.985 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.10:52:30.058 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#73852720:0/SimpleConnection@7e35d743 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 55123]
25-07-20.10:52:30.152 [main            ] INFO  Application            - Started Application in 6.871 seconds (JVM running for 8.718)
25-07-20.10:52:30.564 [RMI TCP Connection(1)-192.168.153.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.10:52:30.565 [RMI TCP Connection(1)-192.168.153.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.10:52:30.568 [RMI TCP Connection(1)-192.168.153.1] INFO  DispatcherServlet      - Completed initialization in 3 ms
25-07-20.10:52:30.573 [RMI TCP Connection(2)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.10:52:30.987 [RMI TCP Connection(2)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.10:52:31.010 [RMI TCP Connection(2)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.10:52:31.044 [RMI TCP Connection(2)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.10:53:00.162 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.10:53:00.200 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.10:53:00.231 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.10:53:00.541 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.10:53:03.199 [http-nio-8091-exec-1] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.10:57:56.932 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=4m55s837ms686µs200ns).
25-07-20.10:57:56.932 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=4m56s589ms560µs100ns).
25-07-20.10:57:56.937 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=4m55s776ms825µs).
25-07-20.10:57:56.950 [http-nio-8091-exec-1] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.10:57:57.379 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.10:57:57.379 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.10:57:57.379 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.10:57:57.379 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.10:57:57.442 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.10:57:57.443 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.10:58:03.064 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 34132 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.10:58:03.067 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.10:58:04.551 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.10:58:04.556 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.10:58:04.637 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 0 Redis repository interfaces.
25-07-20.10:58:05.776 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.10:58:05.797 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.10:58:05.797 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.10:58:05.798 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.10:58:05.958 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.10:58:05.958 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2827 ms
25-07-20.10:58:06.389 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.10:58:07.104 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.10:58:07.133 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.10:58:09.028 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.10:58:09.150 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.10:58:09.170 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.10:58:09.172 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.10:58:09.239 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#c29b0dc:0/SimpleConnection@229c4d34 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 58419]
25-07-20.10:58:09.302 [http-nio-8091-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.10:58:09.302 [http-nio-8091-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.10:58:09.303 [http-nio-8091-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-07-20.10:58:09.338 [main            ] INFO  Application            - Started Application in 6.965 seconds (JVM running for 8.269)
25-07-20.10:58:09.416 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.10:58:09.456 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.10:58:09.725 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.10:58:09.869 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.10:58:09.901 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.10:58:10.129 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.10:58:22.961 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.10:59:44.152 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m34s135ms218µs900ns).
25-07-20.10:59:44.158 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m34s318ms867µs900ns).
25-07-20.10:59:44.169 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.10:59:44.622 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.10:59:44.624 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.10:59:45.169 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.10:59:45.169 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.10:59:45.237 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.10:59:45.238 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.10:59:50.817 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 39752 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.10:59:50.819 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.10:59:51.990 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.10:59:51.992 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.10:59:52.048 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 0 Redis repository interfaces.
25-07-20.10:59:53.054 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.10:59:53.066 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.10:59:53.067 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.10:59:53.067 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.10:59:53.233 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.10:59:53.234 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2353 ms
25-07-20.10:59:53.649 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.10:59:54.335 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.10:59:54.362 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.10:59:55.995 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.10:59:56.105 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.10:59:56.123 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.10:59:56.125 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.10:59:56.178 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#33765d22:0/SimpleConnection@54cce500 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 58704]
25-07-20.10:59:56.263 [main            ] INFO  Application            - Started Application in 6.044 seconds (JVM running for 7.608)
25-07-20.11:02:34.877 [http-nio-8091-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.11:02:34.877 [http-nio-8091-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.11:02:34.878 [http-nio-8091-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-07-20.11:02:34.992 [http-nio-8091-exec-1] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.11:04:14.467 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:04:15.468 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:05:18.298 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=58s872ms988µs600ns).
25-07-20.11:05:18.306 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:05:21.360 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:05:21.353 [http-nio-8091-exec-1] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.11:05:21.425 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:05:21.724 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:153233829134
25-07-20.11:05:21.775 [http-nio-8091-exec-3] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 101
25-07-20.11:05:21.778 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 101 rule_default
25-07-20.11:05:21.779 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:05:21.834 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:05:21.908 [http-nio-8091-exec-3] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:101
25-07-20.11:05:21.924 [http-nio-8091-exec-3] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:101
25-07-20.11:05:22.003 [http-nio-8091-exec-3] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:05:22.005 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 101 null
25-07-20.11:05:22.216 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:05:22.218 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:05:22.365 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:05:22.365 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:05:22.451 [http-nio-8091-exec-3] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"85614504883","timestamp":1752980722034}
25-07-20.11:05:22.578 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.11:05:22.579 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.11:05:28.827 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 31340 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.11:05:28.830 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.11:05:30.059 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.11:05:30.063 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.11:05:30.118 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 0 Redis repository interfaces.
25-07-20.11:05:31.223 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.11:05:31.233 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.11:05:31.233 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.11:05:31.234 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.11:05:31.403 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.11:05:31.403 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2511 ms
25-07-20.11:05:31.760 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.11:05:32.391 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.11:05:32.418 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.11:05:33.961 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.11:05:34.082 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.11:05:34.100 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.11:05:34.103 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.11:05:34.167 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3fc5d397:0/SimpleConnection@67167f8f [delegate=amqp://admin@127.0.0.1:5672/, localPort= 59420]
25-07-20.11:05:34.251 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"85614504883","timestamp":1752980722034}
25-07-20.11:05:34.256 [main            ] INFO  Application            - Started Application in 6.11 seconds (JVM running for 7.026)
25-07-20.11:05:34.790 [RMI TCP Connection(4)-192.168.153.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.11:05:34.791 [RMI TCP Connection(4)-192.168.153.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.11:05:34.795 [RMI TCP Connection(4)-192.168.153.1] INFO  DispatcherServlet      - Completed initialization in 4 ms
25-07-20.11:05:34.795 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:05:35.218 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:05:35.245 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:05:35.281 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:05:43.317 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:05:43.520 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:096695148138
25-07-20.11:05:43.549 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 108
25-07-20.11:05:43.550 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 108 rule_default
25-07-20.11:05:43.551 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:05:43.585 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:05:43.601 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:108
25-07-20.11:05:43.610 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:108
25-07-20.11:05:43.645 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:05:43.647 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 108 null
25-07-20.11:05:43.924 [http-nio-8091-exec-2] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":108,"awardTitle":"暴走玩偶","userId":"xiaofuge"},"id":"55974934034","timestamp":1752980743662}
25-07-20.11:05:43.928 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":108,"awardTitle":"暴走玩偶","userId":"xiaofuge"},"id":"55974934034","timestamp":1752980743662}
25-07-20.11:06:28.915 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.11:06:28.916 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.11:06:28.918 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.11:06:28.918 [http-nio-8091-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.11:06:28.999 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:06:28.999 [http-nio-8091-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:06:28.999 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:06:28.999 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:06:40.247 [http-nio-8091-exec-11] INFO  RaffleActivityController - 活动抽奖 userId:null activityId:100301
25-07-20.11:06:40.261 [http-nio-8091-exec-11] ERROR RaffleActivityController - 活动抽奖失败 userId:null activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.domain.activity.service.partake.RaffleActivityPartakeService.doFilterAccount(RaffleActivityPartakeService.java:35)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:64)
	at cn.bugstack.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.11:06:43.688 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.11:06:43.709 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:09:03.456 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.11:09:03.462 [http-nio-8091-exec-19] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.11:09:03.477 [http-nio-8091-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.11:09:03.477 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:null acticityId:100301
25-07-20.11:09:03.484 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:09:03.488 [http-nio-8091-exec-19] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:09:03.493 [http-nio-8091-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:09:03.499 [http-nio-8091-exec-18] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：null activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:11:20.095 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:11:20.096 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:11:20.107 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:11:20.109 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:11:20.120 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:11:20.121 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:11:20.132 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:11:20.139 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:11:23.779 [http-nio-8091-exec-27] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:11:23.880 [http-nio-8091-exec-27] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:172065019472
25-07-20.11:11:23.892 [http-nio-8091-exec-27] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 107
25-07-20.11:11:23.892 [http-nio-8091-exec-27] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 107 rule_default
25-07-20.11:11:23.925 [http-nio-8091-exec-27] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:107
25-07-20.11:11:23.934 [http-nio-8091-exec-27] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁【放行】 userId:xiaofuge strategyId:100006 awardId:107 raffleCount:3 userRaffleCount:3
25-07-20.11:11:23.934 [http-nio-8091-exec-27] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_1 node:rule_lock code:0000
25-07-20.11:11:23.934 [http-nio-8091-exec-27] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:107
25-07-20.11:11:23.939 [http-nio-8091-exec-27] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:107
25-07-20.11:11:23.944 [http-nio-8091-exec-27] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_1 node:rule_stock code:0001
25-07-20.11:11:23.944 [http-nio-8091-exec-27] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 107 null
25-07-20.11:11:23.985 [http-nio-8091-exec-27] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":107,"awardTitle":"小霸王游戏机","userId":"xiaofuge"},"id":"92983984238","timestamp":1752981083956}
25-07-20.11:11:23.989 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":107,"awardTitle":"小霸王游戏机","userId":"xiaofuge"},"id":"92983984238","timestamp":1752981083956}
25-07-20.11:11:26.529 [http-nio-8091-exec-32] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:11:26.549 [http-nio-8091-exec-32] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:11:34.589 [http-nio-8091-exec-33] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:11:34.679 [http-nio-8091-exec-33] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:991308648926
25-07-20.11:11:34.691 [http-nio-8091-exec-33] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 102
25-07-20.11:11:34.691 [http-nio-8091-exec-33] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 102 rule_default
25-07-20.11:11:34.698 [http-nio-8091-exec-33] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:102
25-07-20.11:11:34.703 [http-nio-8091-exec-33] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:102
25-07-20.11:11:34.705 [http-nio-8091-exec-33] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:11:34.706 [http-nio-8091-exec-33] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 102 null
25-07-20.11:11:34.739 [http-nio-8091-exec-33] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"42519483991","timestamp":1752981094713}
25-07-20.11:11:34.742 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"42519483991","timestamp":1752981094713}
25-07-20.11:11:37.290 [http-nio-8091-exec-35] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:11:37.307 [http-nio-8091-exec-35] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:11:42.399 [http-nio-8091-exec-36] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:11:42.458 [http-nio-8091-exec-36] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:918693136180
25-07-20.11:11:42.469 [http-nio-8091-exec-36] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 101
25-07-20.11:11:42.469 [http-nio-8091-exec-36] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 101 rule_default
25-07-20.11:11:42.474 [http-nio-8091-exec-36] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:101
25-07-20.11:11:42.479 [http-nio-8091-exec-36] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:101
25-07-20.11:11:42.482 [http-nio-8091-exec-36] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:11:42.483 [http-nio-8091-exec-36] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 101 null
25-07-20.11:11:42.508 [http-nio-8091-exec-36] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"58143390529","timestamp":1752981102485}
25-07-20.11:11:42.510 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"58143390529","timestamp":1752981102485}
25-07-20.11:11:45.049 [http-nio-8091-exec-37] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:11:45.069 [http-nio-8091-exec-37] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:12:29.597 [http-nio-8091-exec-39] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:12:29.599 [http-nio-8091-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:12:29.609 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:12:29.614 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:12:29.623 [http-nio-8091-exec-39] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:12:29.626 [http-nio-8091-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:12:29.629 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:12:29.634 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:12:31.009 [http-nio-8091-exec-44] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-07-20.11:12:31.087 [http-nio-8091-exec-44] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-07-20.11:12:44.790 [http-nio-8091-exec-49] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:12:44.795 [http-nio-8091-exec-50] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:12:44.802 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:12:44.802 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:12:44.832 [http-nio-8091-exec-49] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:12:44.832 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:12:44.836 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:12:44.839 [http-nio-8091-exec-50] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:12:46.608 [http-nio-8091-exec-8] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-07-20.11:12:46.684 [http-nio-8091-exec-8] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-07-20.11:13:02.355 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:13:02.419 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:618078600788
25-07-20.11:13:02.429 [http-nio-8091-exec-9] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 105
25-07-20.11:13:02.429 [http-nio-8091-exec-9] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 105 rule_default
25-07-20.11:13:02.448 [http-nio-8091-exec-9] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:105
25-07-20.11:13:02.453 [http-nio-8091-exec-9] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁【放行】 userId:xiaofuge strategyId:100006 awardId:105 raffleCount:6 userRaffleCount:6
25-07-20.11:13:02.453 [http-nio-8091-exec-9] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_3 node:rule_lock code:0000
25-07-20.11:13:02.453 [http-nio-8091-exec-9] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:xiaofuge strategyId:100006 awardId:105 ruleValue:101:1,100
25-07-20.11:13:02.453 [http-nio-8091-exec-9] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:xiaofuge strategyId:100006 awardId:101 awardRuleValue:1,100
25-07-20.11:13:02.454 [http-nio-8091-exec-9] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_3 node:rule_luck_award code:0001
25-07-20.11:13:02.454 [http-nio-8091-exec-9] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 101 1,100
25-07-20.11:13:02.485 [http-nio-8091-exec-9] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"11212024635","timestamp":1752981182460}
25-07-20.11:13:02.487 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"11212024635","timestamp":1752981182460}
25-07-20.11:13:05.022 [http-nio-8091-exec-10] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:13:05.039 [http-nio-8091-exec-10] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:17:26.197 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:17:26.199 [http-nio-8091-exec-13] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:17:26.208 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:17:26.210 [http-nio-8091-exec-15] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:17:26.226 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:17:26.230 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:17:26.284 [http-nio-8091-exec-13] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:554190202185
25-07-20.11:17:26.296 [http-nio-8091-exec-13] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 106
25-07-20.11:17:26.296 [http-nio-8091-exec-13] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 106 rule_default
25-07-20.11:17:26.317 [http-nio-8091-exec-13] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:106
25-07-20.11:17:26.324 [http-nio-8091-exec-13] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁【放行】 userId:xiaofuge strategyId:100006 awardId:106 raffleCount:8 userRaffleCount:8
25-07-20.11:17:26.324 [http-nio-8091-exec-13] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_2 node:rule_lock code:0000
25-07-20.11:17:26.324 [http-nio-8091-exec-13] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:106
25-07-20.11:17:26.324 [http-nio-8091-exec-15] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:720889611243
25-07-20.11:17:26.328 [http-nio-8091-exec-13] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:106
25-07-20.11:17:26.332 [http-nio-8091-exec-13] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_2 node:rule_stock code:0001
25-07-20.11:17:26.332 [http-nio-8091-exec-15] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 103
25-07-20.11:17:26.332 [http-nio-8091-exec-13] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 106 null
25-07-20.11:17:26.332 [http-nio-8091-exec-15] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 103 rule_default
25-07-20.11:17:26.345 [http-nio-8091-exec-15] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:103
25-07-20.11:17:26.351 [http-nio-8091-exec-15] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:103
25-07-20.11:17:26.353 [http-nio-8091-exec-15] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:17:26.353 [http-nio-8091-exec-15] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 103 null
25-07-20.11:17:26.368 [http-nio-8091-exec-13] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":106,"awardTitle":"轻奢办公椅","userId":"xiaofuge"},"id":"65023853103","timestamp":1752981446339}
25-07-20.11:17:26.372 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":106,"awardTitle":"轻奢办公椅","userId":"xiaofuge"},"id":"65023853103","timestamp":1752981446339}
25-07-20.11:17:26.395 [http-nio-8091-exec-15] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"27566010942","timestamp":1752981446360}
25-07-20.11:17:26.398 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"27566010942","timestamp":1752981446360}
25-07-20.11:17:35.982 [http-nio-8091-exec-19] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:17:36.064 [http-nio-8091-exec-19] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:097206313604
25-07-20.11:17:36.074 [http-nio-8091-exec-19] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 105
25-07-20.11:17:36.074 [http-nio-8091-exec-19] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 105 rule_default
25-07-20.11:17:36.082 [http-nio-8091-exec-19] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:105
25-07-20.11:17:36.088 [http-nio-8091-exec-19] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁【放行】 userId:xiaofuge strategyId:100006 awardId:105 raffleCount:9 userRaffleCount:9
25-07-20.11:17:36.088 [http-nio-8091-exec-19] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_3 node:rule_lock code:0000
25-07-20.11:17:36.088 [http-nio-8091-exec-19] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:xiaofuge strategyId:100006 awardId:105 ruleValue:101:1,100
25-07-20.11:17:36.088 [http-nio-8091-exec-19] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:xiaofuge strategyId:100006 awardId:101 awardRuleValue:1,100
25-07-20.11:17:36.088 [http-nio-8091-exec-19] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_3 node:rule_luck_award code:0001
25-07-20.11:17:36.088 [http-nio-8091-exec-19] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 101 1,100
25-07-20.11:17:36.121 [http-nio-8091-exec-19] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"78041056620","timestamp":1752981456091}
25-07-20.11:17:36.124 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"78041056620","timestamp":1752981456091}
25-07-20.11:19:14.400 [http-nio-8091-exec-21] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:19:14.505 [http-nio-8091-exec-21] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:155829614912
25-07-20.11:19:14.515 [http-nio-8091-exec-21] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 102
25-07-20.11:19:14.515 [http-nio-8091-exec-21] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 102 rule_default
25-07-20.11:19:14.526 [http-nio-8091-exec-21] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:102
25-07-20.11:19:14.532 [http-nio-8091-exec-21] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:102
25-07-20.11:19:14.535 [http-nio-8091-exec-21] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:19:14.535 [http-nio-8091-exec-21] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 102 null
25-07-20.11:19:14.570 [http-nio-8091-exec-21] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"85347003731","timestamp":1752981554544}
25-07-20.11:19:14.573 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"85347003731","timestamp":1752981554544}
25-07-20.11:19:17.671 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:19:17.673 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:19:17.686 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:19:17.690 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:19:17.699 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:19:17.699 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:19:17.706 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:19:17.709 [http-nio-8091-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:19:21.499 [http-nio-8091-exec-27] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:19:21.561 [http-nio-8091-exec-27] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:854129475992
25-07-20.11:19:21.568 [http-nio-8091-exec-27] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 102
25-07-20.11:19:21.568 [http-nio-8091-exec-27] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 102 rule_default
25-07-20.11:19:21.576 [http-nio-8091-exec-27] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:102
25-07-20.11:19:21.580 [http-nio-8091-exec-27] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:102
25-07-20.11:19:21.582 [http-nio-8091-exec-27] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:19:21.582 [http-nio-8091-exec-27] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 102 null
25-07-20.11:19:21.608 [http-nio-8091-exec-27] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"80664337281","timestamp":1752981561584}
25-07-20.11:19:21.611 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"80664337281","timestamp":1752981561584}
25-07-20.11:19:24.150 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:19:24.169 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:26:54.973 [http-nio-8091-exec-33] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-07-20.11:26:55.015 [http-nio-8091-exec-33] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-07-20.11:26:58.535 [http-nio-8091-exec-36] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:26:58.622 [http-nio-8091-exec-36] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:994607164969
25-07-20.11:26:58.631 [http-nio-8091-exec-36] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 108
25-07-20.11:26:58.631 [http-nio-8091-exec-36] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 108 rule_default
25-07-20.11:26:58.641 [http-nio-8091-exec-36] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:108
25-07-20.11:26:58.646 [http-nio-8091-exec-36] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:108
25-07-20.11:26:58.650 [http-nio-8091-exec-36] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:26:58.650 [http-nio-8091-exec-36] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 108 null
25-07-20.11:26:58.685 [http-nio-8091-exec-36] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":108,"awardTitle":"暴走玩偶","userId":"xiaofuge"},"id":"52748811265","timestamp":1752982018657}
25-07-20.11:26:58.688 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":108,"awardTitle":"暴走玩偶","userId":"xiaofuge"},"id":"52748811265","timestamp":1752982018657}
25-07-20.11:27:01.235 [http-nio-8091-exec-38] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:27:01.258 [http-nio-8091-exec-38] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:29:34.297 [http-nio-8091-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:29:34.299 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:29:34.309 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:29:34.311 [http-nio-8091-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:29:34.320 [http-nio-8091-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:29:34.323 [http-nio-8091-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:29:34.324 [http-nio-8091-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:29:34.328 [http-nio-8091-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:38:20.398 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:38:20.401 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:38:20.725 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:38:21.010 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:38:21.086 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.11:38:21.086 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.11:38:25.960 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 29524 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.11:38:25.964 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.11:38:27.167 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.11:38:27.170 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.11:38:27.221 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 0 Redis repository interfaces.
25-07-20.11:38:28.369 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.11:38:28.382 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.11:38:28.382 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.11:38:28.383 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.11:38:28.598 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.11:38:28.598 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2571 ms
25-07-20.11:38:29.059 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.11:38:29.796 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.11:38:29.837 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.11:38:31.989 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.11:38:32.103 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.11:38:32.123 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.11:38:32.125 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.11:38:32.182 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3de383f7:0/SimpleConnection@41c83af0 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 65106]
25-07-20.11:38:32.269 [main            ] INFO  Application            - Started Application in 6.902 seconds (JVM running for 7.759)
25-07-20.11:38:32.515 [RMI TCP Connection(2)-192.168.153.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.11:38:32.515 [RMI TCP Connection(2)-192.168.153.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.11:38:32.516 [RMI TCP Connection(2)-192.168.153.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-07-20.11:38:32.520 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:38:32.819 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:38:32.841 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:38:32.873 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:39:07.565 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:39:07.565 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:39:07.565 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:39:07.566 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:39:07.604 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:39:07.646 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:39:08.102 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:39:08.102 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:39:08.102 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:39:08.102 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:39:14.913 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:39:15.019 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:307117890280
25-07-20.11:39:15.040 [http-nio-8091-exec-9] ERROR RaffleActivityController - 活动抽奖失败 userId:xiaofuge activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.infrastructure.persistent.repository.StrategyRepository.getRateRange(StrategyRepository.java:109)
	at cn.bugstack.infrastructure.persistent.repository.StrategyRepository.getRateRange(StrategyRepository.java:102)
	at cn.bugstack.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$1981c8fe.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$84dcfa4.getRateRange(<generated>)
	at cn.bugstack.domain.strategy.service.armory.StrategyArmoryDispatch.getRandomAwardId(StrategyArmoryDispatch.java:148)
	at cn.bugstack.domain.strategy.service.rule.chain.impl.DefaultLogicChain.logic(DefaultLogicChain.java:23)
	at cn.bugstack.domain.strategy.service.raffle.DefaultRaffleStrategy.raffleLogicChain(DefaultRaffleStrategy.java:41)
	at cn.bugstack.domain.strategy.service.AbstractRaffleStrategy.performRaffle(AbstractRaffleStrategy.java:61)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:113)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
25-07-20.11:39:16.552 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:39:16.573 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:39:18.000 [http-nio-8091-exec-24] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-07-20.11:39:18.083 [http-nio-8091-exec-24] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-07-20.11:39:41.988 [http-nio-8091-exec-13] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:39:42.002 [http-nio-8091-exec-13] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:xiaofuge activityId:100301 userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"307117890280","orderState":"create","orderTime":1752982755000,"strategyId":100006,"userId":"xiaofuge"}
25-07-20.11:39:42.002 [http-nio-8091-exec-13] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:307117890280
25-07-20.11:39:42.015 [http-nio-8091-exec-13] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 106
25-07-20.11:39:42.016 [http-nio-8091-exec-13] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 106 rule_default
25-07-20.11:39:42.050 [http-nio-8091-exec-13] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:106
25-07-20.11:39:42.057 [http-nio-8091-exec-13] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁【放行】 userId:xiaofuge strategyId:100006 awardId:106 raffleCount:13 userRaffleCount:13
25-07-20.11:39:42.059 [http-nio-8091-exec-13] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_2 node:rule_lock code:0000
25-07-20.11:39:42.060 [http-nio-8091-exec-13] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:106
25-07-20.11:39:42.065 [http-nio-8091-exec-13] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:106
25-07-20.11:39:42.096 [http-nio-8091-exec-13] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_2 node:rule_stock code:0001
25-07-20.11:39:42.097 [http-nio-8091-exec-13] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 106 null
25-07-20.11:39:42.153 [http-nio-8091-exec-13] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":106,"awardTitle":"轻奢办公椅","userId":"xiaofuge"},"id":"18139137423","timestamp":1752982782109}
25-07-20.11:39:42.164 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":106,"awardTitle":"轻奢办公椅","userId":"xiaofuge"},"id":"18139137423","timestamp":1752982782109}
25-07-20.11:39:44.694 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:39:44.716 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:44:37.906 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:44:37.908 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:44:37.982 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:44:38.336 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:44:38.400 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.11:44:38.400 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.11:44:50.385 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 35636 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.11:44:50.388 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.11:44:51.538 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.11:44:51.541 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.11:44:51.594 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 0 Redis repository interfaces.
25-07-20.11:44:52.510 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.11:44:52.518 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.11:44:52.518 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.11:44:52.518 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.11:44:52.669 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.11:44:52.670 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2207 ms
25-07-20.11:44:53.011 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.11:44:53.626 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.11:44:53.653 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.11:44:55.122 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.11:44:55.231 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.11:44:55.247 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.11:44:55.248 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.11:44:55.299 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#42ebece0:0/SimpleConnection@41c83af0 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 49708]
25-07-20.11:44:55.382 [main            ] INFO  Application            - Started Application in 5.53 seconds (JVM running for 6.365)
25-07-20.11:44:55.769 [RMI TCP Connection(3)-192.168.153.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.11:44:55.769 [RMI TCP Connection(3)-192.168.153.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.11:44:55.771 [RMI TCP Connection(3)-192.168.153.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-07-20.11:44:55.775 [RMI TCP Connection(2)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:44:56.032 [RMI TCP Connection(2)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:44:56.053 [RMI TCP Connection(2)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:44:56.086 [RMI TCP Connection(2)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:45:01.531 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:45:01.531 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:45:01.531 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:45:01.531 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:45:01.576 [http-nio-8091-exec-7] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:45:01.610 [http-nio-8091-exec-7] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:45:01.936 [http-nio-8091-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:45:01.936 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:45:01.936 [http-nio-8091-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:45:01.936 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:45:05.459 [http-nio-8091-exec-11] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:45:05.550 [http-nio-8091-exec-11] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:074578568011
25-07-20.11:45:05.577 [http-nio-8091-exec-11] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 107
25-07-20.11:45:05.578 [http-nio-8091-exec-11] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 107 rule_default
25-07-20.11:45:05.617 [http-nio-8091-exec-11] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:107
25-07-20.11:45:05.624 [http-nio-8091-exec-11] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁【放行】 userId:xiaofuge strategyId:100006 awardId:107 raffleCount:14 userRaffleCount:14
25-07-20.11:45:05.626 [http-nio-8091-exec-11] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_1 node:rule_lock code:0000
25-07-20.11:45:05.627 [http-nio-8091-exec-11] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:107
25-07-20.11:45:05.634 [http-nio-8091-exec-11] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:107
25-07-20.11:45:05.672 [http-nio-8091-exec-11] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_1 node:rule_stock code:0001
25-07-20.11:45:05.672 [http-nio-8091-exec-11] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 107 null
25-07-20.11:45:05.738 [http-nio-8091-exec-11] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":107,"awardTitle":"小霸王游戏机","userId":"xiaofuge"},"id":"64085666802","timestamp":1752983105690}
25-07-20.11:45:05.751 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":107,"awardTitle":"小霸王游戏机","userId":"xiaofuge"},"id":"64085666802","timestamp":1752983105690}
25-07-20.11:45:08.292 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:45:08.314 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:47:49.290 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:47:49.291 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:47:49.306 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:47:49.306 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:47:49.325 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:47:49.327 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:47:49.331 [http-nio-8091-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:47:49.333 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:47:52.888 [http-nio-8091-exec-19] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:47:52.958 [http-nio-8091-exec-19] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:770606837320
25-07-20.11:47:52.969 [http-nio-8091-exec-19] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 103
25-07-20.11:47:52.970 [http-nio-8091-exec-19] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 103 rule_default
25-07-20.11:47:52.993 [http-nio-8091-exec-19] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:103
25-07-20.11:47:52.998 [http-nio-8091-exec-19] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:103
25-07-20.11:47:53.001 [http-nio-8091-exec-19] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:47:53.002 [http-nio-8091-exec-19] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 103 null
25-07-20.11:47:53.040 [http-nio-8091-exec-19] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"66443745669","timestamp":1752983273010}
25-07-20.11:47:53.043 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"66443745669","timestamp":1752983273010}
25-07-20.11:47:55.587 [http-nio-8091-exec-37] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:47:55.606 [http-nio-8091-exec-37] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:48:24.172 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:48:24.175 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:48:24.303 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:48:24.960 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:48:25.022 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.11:48:25.023 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.11:48:35.682 [main            ] INFO  Application            - Starting Application using Java 18.0.2 on LAPTOP-JQ369557 with PID 37964 (D:\Java_project\big_market\big_market-app\target\classes started by zxy in D:\Java_project\big_market)
25-07-20.11:48:35.685 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-07-20.11:48:36.803 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-07-20.11:48:36.806 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-07-20.11:48:36.859 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 0 Redis repository interfaces.
25-07-20.11:48:37.851 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-07-20.11:48:37.861 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-07-20.11:48:37.862 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-07-20.11:48:37.862 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-07-20.11:48:38.013 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-07-20.11:48:38.013 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2274 ms
25-07-20.11:48:38.397 [main            ] INFO  Version                - Redisson 3.23.4
25-07-20.11:48:39.031 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.11:48:39.058 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-07-20.11:48:40.650 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-07-20.11:48:40.754 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-07-20.11:48:40.771 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-07-20.11:48:40.773 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-07-20.11:48:40.821 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#341964d0:0/SimpleConnection@41c83af0 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 59102]
25-07-20.11:48:40.903 [main            ] INFO  Application            - Started Application in 5.792 seconds (JVM running for 6.703)
25-07-20.11:48:41.070 [RMI TCP Connection(2)-192.168.153.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-07-20.11:48:41.070 [RMI TCP Connection(2)-192.168.153.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-07-20.11:48:41.072 [RMI TCP Connection(2)-192.168.153.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-07-20.11:48:41.075 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:48:41.355 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:48:41.377 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:48:41.407 [RMI TCP Connection(3)-192.168.153.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:49:03.700 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:49:03.700 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:49:03.700 [http-nio-8091-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:49:03.701 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:49:03.744 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-07-20.11:49:03.784 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-07-20.11:49:04.104 [http-nio-8091-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:49:04.104 [http-nio-8091-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:49:04.104 [http-nio-8091-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:49:04.104 [http-nio-8091-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:49:07.736 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:49:07.830 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:459267522872
25-07-20.11:49:07.851 [http-nio-8091-exec-9] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 108
25-07-20.11:49:07.852 [http-nio-8091-exec-9] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 108 rule_default
25-07-20.11:49:07.869 [http-nio-8091-exec-9] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:108
25-07-20.11:49:07.877 [http-nio-8091-exec-9] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:108
25-07-20.11:49:07.910 [http-nio-8091-exec-9] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:49:07.911 [http-nio-8091-exec-9] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 108 null
25-07-20.11:49:07.965 [http-nio-8091-exec-9] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":108,"awardTitle":"暴走玩偶","userId":"xiaofuge"},"id":"67432929195","timestamp":1752983347925}
25-07-20.11:49:07.976 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":108,"awardTitle":"暴走玩偶","userId":"xiaofuge"},"id":"67432929195","timestamp":1752983347925}
25-07-20.11:49:10.512 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:49:10.531 [http-nio-8091-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:02.745 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:02.748 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:02.763 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:02.764 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:02.775 [http-nio-8091-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:02.781 [http-nio-8091-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:02.785 [http-nio-8091-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:02.789 [http-nio-8091-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:07.344 [http-nio-8091-exec-20] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:50:07.438 [http-nio-8091-exec-20] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:308083284132
25-07-20.11:50:07.448 [http-nio-8091-exec-20] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 103
25-07-20.11:50:07.449 [http-nio-8091-exec-20] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 103 rule_default
25-07-20.11:50:07.457 [http-nio-8091-exec-20] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:103
25-07-20.11:50:07.464 [http-nio-8091-exec-20] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:103
25-07-20.11:50:07.467 [http-nio-8091-exec-20] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:50:07.467 [http-nio-8091-exec-20] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 103 null
25-07-20.11:50:07.498 [http-nio-8091-exec-20] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"59758133621","timestamp":1752983407470}
25-07-20.11:50:07.501 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"59758133621","timestamp":1752983407470}
25-07-20.11:50:10.043 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:10.063 [http-nio-8091-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:22.641 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:22.644 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:22.651 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:22.654 [http-nio-8091-exec-26] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:22.685 [http-nio-8091-exec-23] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:22.686 [http-nio-8091-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:22.686 [http-nio-8091-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:22.688 [http-nio-8091-exec-26] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:50:24.124 [http-nio-8091-exec-28] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-07-20.11:50:24.212 [http-nio-8091-exec-28] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-07-20.11:50:25.657 [http-nio-8091-exec-36] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-07-20.11:50:25.707 [http-nio-8091-exec-36] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-07-20.11:50:29.054 [http-nio-8091-exec-37] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
25-07-20.11:50:29.119 [http-nio-8091-exec-37] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:924653522480
25-07-20.11:50:29.129 [http-nio-8091-exec-37] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: rule_default awardId: 101
25-07-20.11:50:29.129 [http-nio-8091-exec-37] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge 100006 101 rule_default
25-07-20.11:50:29.153 [http-nio-8091-exec-37] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge strategyId:100006 awardId:101
25-07-20.11:50:29.157 [http-nio-8091-exec-37] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减-成功 userId:xiaofuge strategyId:100006 awardId:101
25-07-20.11:50:29.160 [http-nio-8091-exec-37] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
25-07-20.11:50:29.160 [http-nio-8091-exec-37] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 101 null
25-07-20.11:50:29.197 [http-nio-8091-exec-37] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"24940012330","timestamp":1752983429170}
25-07-20.11:50:29.199 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"24940012330","timestamp":1752983429170}
25-07-20.11:50:31.734 [http-nio-8091-exec-35] INFO  RaffleStrategyController - 查询抽奖奖品列表配开始 userId:xiaofuge acticityId:100301
25-07-20.11:50:31.753 [http-nio-8091-exec-35] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成 userId：xiaofuge activityId:100301 response: {"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"调用成功"}
25-07-20.11:51:53.016 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:51:53.019 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-07-20.11:51:53.402 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:51:53.865 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-07-20.11:51:53.928 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-07-20.11:51:53.928 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
